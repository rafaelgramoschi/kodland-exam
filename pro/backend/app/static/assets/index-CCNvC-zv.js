var C=Object.defineProperty;var D=(i,l,u)=>l in i?C(i,l,{enumerable:!0,configurable:!0,writable:!0,value:u}):i[l]=u;var b=(i,l,u)=>D(i,typeof l!="symbol"?l+"":l,u);import{V as $,a as y,b as n,c as k,d as N,e as S}from"./VTextField-eyAALihB.js";import{v as p,k as j}from"./forwardRefs-Vhkun_rj.js";import{o as x,k as V,l as a,h as e,n as m,q as c,r as M,$ as T,A,a0 as q}from"./index-Cjm2iRJO.js";const f={__name:"WeatherCard",props:["title","subtitle","weather","tempDay","tempNight"],setup(i){const l={sole:"mdi-weather-sunny",nuvole:"mdi-weather-cloudy",nebbia:"mdi-weather-fog",pioggia:"mdi-weather-pouring",neve:"mdi-weather-snowy"};return(u,s)=>(x(),V(k,{title:i.title,subtitle:i.subtitle,"min-height":"250",class:"align-content-center"},{default:a(()=>[e($,null,{default:a(()=>[e(y,{align:"center","no-gutters":""},{default:a(()=>[e(n,{class:"text-h4",cols:"5"},{default:a(()=>[m(c(i.weather),1)]),_:1}),e(n,{class:"text-right",cols:"7"},{default:a(()=>[e(p,{color:"white",icon:l[i.weather],size:"90"},null,8,["icon"]),e(y,null,{default:a(()=>[e(n,{cols:"6"},{default:a(()=>[e(p,{color:"yellow"},{default:a(()=>s[0]||(s[0]=[m("mdi-sun-clock")])),_:1}),m(" "+c(i.tempDay)+" °C ",1)]),_:1}),e(n,{cols:"6"},{default:a(()=>[e(p,{color:"blue"},{default:a(()=>s[1]||(s[1]=[m("mdi-weather-night")])),_:1}),m(" "+c(i.tempNight)+" °C ",1)]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["title","subtitle"]))}},P={__name:"index",setup(i){class l{constructor(){b(this,"DAYS",{1:"Lunedì",2:"Martedì",3:"Mercoledì",4:"Giovedì",5:"Venerdì",6:"Sabato",7:"Domenica"});this.date=new Date,this.dayName=this.DAYS[this.date.getDay()],this.day=this.date.getDate(),this.month=this.date.getMonth()+1,this.year=this.date.getFullYear()}print(){return`${this.dayName} ${this.day}.${this.month}.${this.year}`}}const u=new l,s=M("Roma"),t=T({yesterday:{date:"",weather:"sole",temperature:{day:9,night:5}},today:{date:"",weather:"sole",temperature:{day:14,night:3}},tomorrow:{date:"",weather:"nebbia",temperature:{day:11,night:2}}});function h(o){if(o==1)return"sole";if(9<=o<=22)return"nuvole";if(23<=o<=28)return"pioggia";if(29<=o<=35)return"neve"}async function v(){var g,_;let o=await fetch(`https://nominatim.openstreetmap.org/search.php?q=${s.value}&format=jsonv2`);o=await o.json(),console.log("city lat lon:",o);const d=(g=o[0])==null?void 0:g.lat,r=(_=o[0])==null?void 0:_.lon;return[d,r]}async function w(){const[o,d]=await v();let r=await fetch(`https://my.meteoblue.com/packages/basic-day?apikey=gbAE1SpKPoIJ6qzG&lat=${o}&lon=${d}&format=json&history_days=1&forecast_days=2`);r=await r.json(),t.yesterday.weather=h(r.data_day.pictocode[0]),t.yesterday.date=r.data_day.time[0],t.yesterday.temperature.day=r.data_day.temperature_max[0],t.yesterday.temperature.night=r.data_day.temperature_min[0],t.today.weather=h(r.data_day.pictocode[1]),t.today.date=r.data_day.time[1],t.today.temperature.day=r.data_day.temperature_max[1],t.today.temperature.night=r.data_day.temperature_min[1],t.tomorrow.weather=h(r.data_day.pictocode[2]),t.tomorrow.date=r.data_day.time[2],t.tomorrow.temperature.day=r.data_day.temperature_max[2],t.tomorrow.temperature.night=r.data_day.temperature_min[2]}return A(async()=>{await w(),console.log(t)}),(o,d)=>(x(),V(S,null,{default:a(()=>[e(y,{class:"text-center"},{default:a(()=>[e(n,{cols:"12",class:"text-h3"},{default:a(()=>d[2]||(d[2]=[m("Meteo")])),_:1}),e(n,{cols:"12",class:"text-h5"},{default:a(()=>[m(c(q(u).print()),1)]),_:1})]),_:1}),e(y,{class:"justify-center"},{default:a(()=>[e(n,{cols:"3"},{default:a(()=>[e(N,{density:"comfortable",modelValue:s.value,"onUpdate:modelValue":d[0]||(d[0]=r=>s.value=r),variant:"solo-filled",placeholder:"Cerca il nome di una città..."},null,8,["modelValue"])]),_:1}),e(n,{cols:"1"},{default:a(()=>[e(j,{icon:"mdi-magnify",onClick:d[1]||(d[1]=r=>w())})]),_:1})]),_:1}),e(y,{class:"text-center align-center"},{default:a(()=>[e(n,{cols:"4"},{default:a(()=>[e(f,{title:"Ieri",subtitle:t.yesterday.date,weather:t.yesterday.weather,"temp-day":t.yesterday.temperature.day,"temp-night":t.yesterday.temperature.night},null,8,["subtitle","weather","temp-day","temp-night"])]),_:1}),e(n,{cols:"4"},{default:a(()=>[e(f,{title:`${s.value} Oggi`,subtitle:t.today.date,weather:t.today.weather,"temp-day":t.today.temperature.day,"temp-night":t.today.temperature.night},null,8,["title","subtitle","weather","temp-day","temp-night"])]),_:1}),e(n,{cols:"4"},{default:a(()=>[e(f,{title:"Domani",subtitle:t.tomorrow.date,weather:t.tomorrow.weather,"temp-day":t.tomorrow.temperature.day,"temp-night":t.tomorrow.temperature.night},null,8,["subtitle","weather","temp-day","temp-night"])]),_:1})]),_:1})]),_:1}))}};export{P as default};
