import{p as O,m as c,g as L,r as N,f as T,h as a,$ as g,o as $,k as B,l as s,a1 as w,n as p}from"./index-ByEsZSVe.js";import{m as A,f as E,b as y,c as S,g as v,V as P,d as f,h as x,a as j,e as D}from"./VTextField-qNJPwDcA.js";import{l as G,k as F}from"./forwardRefs-BsK78O3A.js";import{V}from"./VSpacer-CNkRJRCR.js";const I=O({...c(),...A()},"VForm"),C=L()({name:"VForm",props:I(),emits:{"update:modelValue":d=>!0,submit:d=>!0},setup(d,m){let{slots:t,emit:o}=m;const r=E(d),e=N();function l(u){u.preventDefault(),r.reset()}function R(u){const i=u,n=r.validate();i.then=n.then.bind(n),i.catch=n.catch.bind(n),i.finally=n.finally.bind(n),o("submit",i),i.defaultPrevented||n.then(U=>{var b;let{valid:k}=U;k&&((b=e.value)==null||b.submit())}),i.preventDefault()}return T(()=>{var u;return a("form",{ref:e,class:["v-form",d.class],style:d.style,novalidate:!0,onReset:l,onSubmit:R},[(u=t.default)==null?void 0:u.call(t,r)])}),G(r,e)}}),z={__name:"login",setup(d){const m="https://gramoschirafael.pythonanywhere.com";console.log("FLASK running on: ",m);const t=g({isValid:!1,username:"",password:"",login:async()=>{if(!t.isValid)return!1;let r=await fetch(`${m}/auth/login`,{method:"POST",body:JSON.stringify(t)});r=await r.json(),console.log("LOGIN PROCESS ->",r)}}),o=g({isValid:!1,username:"",password:"",repeatPassword:"",signup:async()=>{if(!o.isValid)return!1;let r=await fetch(`${m}/auth/signup`,{method:"POST",body:JSON.stringify(o)});r=await r.json(),console.log("SIGNUP PROCESS ->",r)}});return(r,e)=>($(),B(D,null,{default:s(()=>[a(j,null,{default:s(()=>[a(y,{cols:"12",sm:"6"},{default:s(()=>[a(S,{class:"text-center h-100"},{default:s(()=>[a(C,{modelValue:t.isValid,"onUpdate:modelValue":e[2]||(e[2]=l=>t.isValid=l),onSubmit:e[3]||(e[3]=w(l=>t.login(),["prevent"])),class:"d-flex flex-column h-100"},{default:s(()=>[a(v,null,{default:s(()=>e[9]||(e[9]=[p("Login")])),_:1}),a(P,{class:"mx-8"},{default:s(()=>[a(f,{density:"comfortable",label:"Username",modelValue:t.username,"onUpdate:modelValue":e[0]||(e[0]=l=>t.username=l),rules:[l=>!!l||"obbligatorio"]},null,8,["modelValue","rules"]),a(f,{density:"comfortable",label:"Password",modelValue:t.password,"onUpdate:modelValue":e[1]||(e[1]=l=>t.password=l),rules:[l=>!!l||"obbligatorio"]},null,8,["modelValue","rules"])]),_:1}),a(x,null,{default:s(()=>[a(V),a(F,{type:"submit"},{default:s(()=>e[10]||(e[10]=[p("Login")])),_:1}),a(V)]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),a(y,{cols:"12",sm:"6"},{default:s(()=>[a(S,{class:"text-center"},{default:s(()=>[a(C,{modelValue:o.isValid,"onUpdate:modelValue":e[7]||(e[7]=l=>o.isValid=l),onSubmit:e[8]||(e[8]=w(l=>o.signup(),["prevent"]))},{default:s(()=>[a(v,null,{default:s(()=>e[11]||(e[11]=[p("Registrati")])),_:1}),a(P,{class:"mx-8"},{default:s(()=>[a(f,{density:"comfortable",label:"Username",modelValue:o.username,"onUpdate:modelValue":e[4]||(e[4]=l=>o.username=l),rules:[l=>!!l||"obbligatorio"]},null,8,["modelValue","rules"]),a(f,{density:"comfortable",label:"Password",type:"password",modelValue:o.password,"onUpdate:modelValue":e[5]||(e[5]=l=>o.password=l),rules:[l=>!!l||"obbligatorio"]},null,8,["modelValue","rules"]),a(f,{density:"comfortable",label:"Ripeti Password",type:"password",modelValue:o.repeatPassword,"onUpdate:modelValue":e[6]||(e[6]=l=>o.repeatPassword=l),rules:[l=>l==o.password||"Le password sono diverse"]},null,8,["modelValue","rules"])]),_:1}),a(x,null,{default:s(()=>[a(V),a(F,{type:"submit"},{default:s(()=>e[12]||(e[12]=[p("Registrati")])),_:1}),a(V)]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}))}};export{z as default};
