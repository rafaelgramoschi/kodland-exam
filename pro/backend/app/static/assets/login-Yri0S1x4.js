import{p as O,m as L,g as N,r as T,f as $,h as s,$ as g,o as c,k as B,l as a,a1 as w,n as p}from"./index-Dzi16QXh.js";import{m as A,f as E,b as y,c as S,g as v,V as P,d as f,h as x,a as j,e as D}from"./VTextField-D9NizhiB.js";import{l as G,k as F}from"./forwardRefs-s2-vm_I1.js";import{V}from"./VSpacer-dhXDpTyZ.js";const I=O({...L(),...A()},"VForm"),C=N()({name:"VForm",props:I(),emits:{"update:modelValue":d=>!0,submit:d=>!0},setup(d,m){let{slots:t,emit:o}=m;const r=E(d),e=T();function l(u){u.preventDefault(),r.reset()}function R(u){const i=u,n=r.validate();i.then=n.then.bind(n),i.catch=n.catch.bind(n),i.finally=n.finally.bind(n),o("submit",i),i.defaultPrevented||n.then(U=>{var b;let{valid:k}=U;k&&((b=e.value)==null||b.submit())}),i.preventDefault()}return $(()=>{var u;return s("form",{ref:e,class:["v-form",d.class],style:d.style,novalidate:!0,onReset:l,onSubmit:R},[(u=t.default)==null?void 0:u.call(t,r)])}),G(r,e)}}),z={__name:"login",setup(d){const m="http://127.0.0.1:5000";console.log("FLASK running on: ",m);const t=g({isValid:!1,username:"",password:"",login:async()=>{if(!t.isValid)return!1;let r=await fetch(`${m}/auth/login`,{method:"POST",body:JSON.stringify(t)});r=await r.json(),console.log("LOGIN PROCESS ->",r)}}),o=g({isValid:!1,username:"",password:"",repeatPassword:"",signup:async()=>{if(!o.isValid)return!1;let r=await fetch(`${m}/auth/signup`,{method:"POST",body:JSON.stringify(o)});r=await r.json(),console.log("SIGNUP PROCESS ->",r)}});return(r,e)=>(c(),B(D,null,{default:a(()=>[s(j,null,{default:a(()=>[s(y,{cols:"12",sm:"6"},{default:a(()=>[s(S,{class:"text-center h-100"},{default:a(()=>[s(C,{modelValue:t.isValid,"onUpdate:modelValue":e[2]||(e[2]=l=>t.isValid=l),onSubmit:e[3]||(e[3]=w(l=>t.login(),["prevent"])),class:"d-flex flex-column h-100"},{default:a(()=>[s(v,null,{default:a(()=>e[9]||(e[9]=[p("Login")])),_:1}),s(P,{class:"mx-8"},{default:a(()=>[s(f,{density:"comfortable",label:"Username",modelValue:t.username,"onUpdate:modelValue":e[0]||(e[0]=l=>t.username=l),rules:[l=>!!l||"obbligatorio"]},null,8,["modelValue","rules"]),s(f,{density:"comfortable",label:"Password",modelValue:t.password,"onUpdate:modelValue":e[1]||(e[1]=l=>t.password=l),rules:[l=>!!l||"obbligatorio"]},null,8,["modelValue","rules"])]),_:1}),s(x,null,{default:a(()=>[s(V),s(F,{type:"submit"},{default:a(()=>e[10]||(e[10]=[p("Login")])),_:1}),s(V)]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),s(y,{cols:"12",sm:"6"},{default:a(()=>[s(S,{class:"text-center"},{default:a(()=>[s(C,{modelValue:o.isValid,"onUpdate:modelValue":e[7]||(e[7]=l=>o.isValid=l),onSubmit:e[8]||(e[8]=w(l=>o.signup(),["prevent"]))},{default:a(()=>[s(v,null,{default:a(()=>e[11]||(e[11]=[p("Registrati")])),_:1}),s(P,{class:"mx-8"},{default:a(()=>[s(f,{density:"comfortable",label:"Username",modelValue:o.username,"onUpdate:modelValue":e[4]||(e[4]=l=>o.username=l),rules:[l=>!!l||"obbligatorio"]},null,8,["modelValue","rules"]),s(f,{density:"comfortable",label:"Password",type:"password",modelValue:o.password,"onUpdate:modelValue":e[5]||(e[5]=l=>o.password=l),rules:[l=>!!l||"obbligatorio"]},null,8,["modelValue","rules"]),s(f,{density:"comfortable",label:"Ripeti Password",type:"password",modelValue:o.repeatPassword,"onUpdate:modelValue":e[6]||(e[6]=l=>o.repeatPassword=l),rules:[l=>l==o.password||"Le password sono diverse"]},null,8,["modelValue","rules"])]),_:1}),s(x,null,{default:a(()=>[s(V),s(F,{type:"submit"},{default:a(()=>e[12]||(e[12]=[p("Registrati")])),_:1}),s(V)]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1}))}};export{z as default};
